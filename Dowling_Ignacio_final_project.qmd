---
title: "Examining Factors for NFL Draftees Value, Success, and High Draft Spots at Quarterback and Offensive or Defensive Line: 1985 to 2021"
subtitle: |
  | Final Project 
  | Data Science 1 with R (STAT 301-1)
author: "Ignacio Dowling"
date: today

format:
  html:
    toc: true
    embed-resources: true
    
execute:
  echo: false
  warning: false

from: markdown+emoji 
---
::: {.callout-tip icon=false}

## Github Repo Link

[https://github.com/stat301-1-2023-fall/final-project-1-idowling11](https://github.com/stat301-1-2023-fall/final-project-1-idowling11)

:::

```{r}
# loading packages
library(tidyverse)
library(readr)
library(ggplot2)
library(naniar)
library(knitr)
library(stringr)
library(ggrepel)
```

```{r}
# reading in .csv from first dataset
nfl_draft_player_info_and_outcomes <- read_csv("data/raw/nfl_draft.csv") 

# reading in five .csvs from second dataset
nfl_draft_prospect_data <- read_csv("data/raw/nfl_draft_prospects.csv")
nfl_draft_profiles <- read_csv("data/raw/nfl_draft_profiles.csv")
player_ids <- read_csv("data/raw/ids.csv")
college_stats <- read_csv("data/raw/college_statistics.csv")
qb_data_to_2004 <- read_csv("data/raw/college_qbr.csv")
```

```{r}
# Writing Codebooks
college_qbr_codebook <- tibble(
        variables = c("season", "guid", "player_name", "age", "total_qbr", "points_added", "qb_plays", "total_epa", "pass", "run", "exp_sack", "penalty", "raw_qbr", "sack"),
        
        descriptions = c("College season","Season ID for player", "player name", "current age", "Adjusted Total QB Rating, which values quarterbacks on all plays from 0-100 scale adjusted for strength of opposing defenses.", "Number of points contributed by a QB, accounting for QBR and how much he plays, above the level of an average quarterback.", "Plays on which the QB has a non-zero expected points contribution. Includes most plays that are not handoffs.", "Total expected points added with low leverage plays, according to ESPN Win Probability model, down-weighted.", "Expected points added on pass attempts with low leverage plays down-weighted.", "Clutch-weighted expected points added through rushes", "Clutch-weighted expected points added (lost) from sacks (not fumbles that may occur because of sacks)", "Expected points added on penalties with low leverage plays down-weighted.", "Raw Total QB Rating, which values QB on all play types on a 0-100 scale (not adjusted for opposing defenses faced)", "Expected points added on sacks with low leverage plays down-weighted." )
)

college_statistics_codebook <- tibble(
  variables = c("player_id", "alt_player_id", "player_name", "pos_abbr", "school", "school_abbr", "school_primary_color", "school_alt_color", "season", "statistic", "value", "active", "all_star"), 
  
  descriptions = c("Unique Player ID", "Alternate player ID", "Player name", "Position abbreviation", "School name", "School abbreviation", "School primary color", "School alternate color", "Season", "Football statistic", "Football statistic's value", "Is the player active?", "Was the player a college all-star?"))

nfl_draft_prospects_codebook <- tibble(
  variables = c("draft_year", "player_id", "player_name", "pos", "pos_abbr", "school", "school_name", "school_abbr", "link", "pick", "overall", "round", "traded", "trade_note", "team", "team_abbr", "team_logo_espn", "guid", "weight", "height", "pos_rk", "ovr_rk", "grade", "player_image"),
  
  descriptions = c("Draft Year", "Unique player ID", "Player name", "Position", "Position abbreviation", "School name", "School team name", "School abbreviation", "Link to ESPN profile", "NFL Draft pick number", "Overall draft pick number", "Draft round", "Was the player traded in the NFL Draft?", "Note about where the player was traded, if applicable", "Drafting team name", "Drafting team abbreviation", "Team logo", "Alternate ID", "Weight", "Height (inches)", "Position Rank by ESPN in draft class", "Overall rank by ESPN in draft class", "ESPN Grade", "Player image"))

nfl_draft_profiles_codebook <- tibble(
  variables = c("player_id", "guid", "alt_player_id", "player_name", "position", "pos_abbr", "weight", "height", "player_image", "link", "school_logo", "school", "school_abbr", "school_name", "pos_rk", "ovr_rk", "grade", "text1", "text2", "text3", "text4"),
  
  descriptions = c("Player ID", "Alternate Character ID", "Primary Alternate Player ID", "Player Name", "Position", "Position abbreviation", "Weight", "Height (inches)", "Player image", "Link to ESPN profile", "School logo", "School name", "School abbreviation", "School team name", "Position rank, ESPN", "Overall rank, ESPN", "ESPN Grade", "Prospect note 1", "Prospect note 2", "Prospect note 3", "Prospect note 4"))

nfl_draft_codebook <- tibble(
  variables = c("column_a", "player_id", "year", "rnd", "pick", "tm", "player", "hof", "pos", "position_standard", "first4av", "age", "to", "ap1", "pb", "st", "carav", "drav", "g", "cmp", "pass_att", "pass_yds", "pass_td", "pass_int", "rush_att", "rush_yds", "rush_tds", "rec", "rec_yds", "rec_tds", "tkl", "def_int", "sk", "college_univ"),
  
  descriptions = c("Year and Player name", "Player ID", "Year", "Draft round", "Pick number", "Team", "Player name", "Hall of Fame?", "Position", "Standard football position", "Approximate Value (AV) in first 4 seasons", "Age", "Last year played in NFL", "All-Pro First Team Selections", "Pro Bowl selections", "Seasons as a starter", "Career AV", "Draft average", "Games played", "Completion percentage", "Pass attempts", "Passing yards", "Passing touchdowns", "Passing interceptions", "Rushing attempts", "Rushing yards", "Rushing touchdowns", "Receptions", "Receiving yards", "Receiving touchdowns", "Tackles", "Defensive interceptions", "Sacks", "College"))

nfl_draft_prospect_data_and_outcomes_1985_to_2015_codebook <- tibble(
  variables = c("join_id_outcomes", "player_id", "year", "rnd", "pick", "team_abbr", "player", "hof", "pos", "position_standard", "first4av", "age", "to", "ap1", "pb", "st", "carav", "drav", "g", "cmp", "pass_att", "pass_yds", "pass_td", "pass_int", "rush_att", "rush_yds", "rush_tds", "rec", "rec_yds", "rec_tds", "tkl", "def_int", "sk", "college_univ", "position", "position_abbr", "school", "traded", "trade_note", "team",  "weight", "height", "pos_rk", "ovr_rk", "grade"),
  
  descriptions = c("Player ID used to match/join two datasets together", "Player ID", "Year", "Draft round", "Pick number", "Team", "Player name", "Hall of Fame?", "Position", "Standard football position", "Approximate Value (AV) in first 4 seasons", "Age", "Last year played in NFL", "All-Pro First Team Selections", "Pro Bowl selections", "Seasons as a starter", "Career AV", "Draft average", "Games played", "Completion percentage", "Pass attempts", "Passing yards", "Passing touchdowns", "Passing interceptions", "Rushing attempts", "Rushing yards", "Rushing touchdowns", "Receptions", "Receiving yards", "Receiving touchdowns", "Tackles", "Defensive interceptions", "Sacks", "College", "Position", "Position abbreviation", "School name", "Were they traded?", "Note about trade, if applicable", "Team name", "Weight", "Height (inches)", "Position rank, ESPN", "Overall draft rank, ESPN", "Prospect Grade, ESPN"))

nfl_draft_prospects_and_profiles_combined_1985_to_2021_codebook <- tibble(
  variables = c("draft_year", "player_id", "player_name", "position", "pos_abbr", "school", "school_name", "school_abbr", "link", "pick", "overall", "round", "traded", "trade_note", "team", "team_abbr", "weight", "height", "pos_rk", "ovr_rk", "grade", "alt_player_id", "join_id_outcomes"),
  descriptions = c("Draft Year", "Unique player ID", "Player name", "Position", "Position abbreviation", "School name", "School team name", "School abbreviation", "Link to ESPN profile", "NFL Draft pick number", "Overall draft pick number", "Draft round", "Was the player traded in the NFL Draft?", "Note about where the player was traded, if applicable", "Drafting team name", "Drafting team abbreviation", "Weight", "Height (inches)", "Position Rank by ESPN in draft class", "Overall rank by ESPN in draft class", "ESPN Grade", "Alternate Player ID", "Player ID used to match/join two datasets together"))

```

```{r}
# Writing in Codebooks
write_csv(college_qbr_codebook,
          "codebooks/college_qbr_codebook.csv")

write_csv(college_statistics_codebook,
          "codebooks/college_statistics_codebook.csv")

write_csv(nfl_draft_prospects_codebook,
          "codebooks/nfl_draft_prospects_codebook.csv")

write_csv(nfl_draft_profiles_codebook,
          "codebooks/nfl_draft_profiles_codebook.csv")

write_csv(nfl_draft_codebook,
          "codebooks/nfl_draft_codebook.csv")

write_csv(nfl_draft_prospect_data_and_outcomes_1985_to_2015_codebook,
          "codebooks/nfl_draft_prospect_data_and_outcomes_1985_to_2015_codebook.csv")

write_csv(nfl_draft_prospects_and_profiles_combined_1985_to_2021_codebook,
          "codebooks/nfl_draft_prospects_and_profiles_combined_1985_to_2021_codebook.csv")
```


## Foundation for Cleaning: Raw Dataset Timelines
```{r}
#| echo: false
# Establishing a foundation for cleaning: Making raw dataset timeline
min_year_outcomes <- nfl_draft_player_info_and_outcomes |>
  summarize(min_year_outcomes = min(year))

max_year_outcomes <- nfl_draft_player_info_and_outcomes |>
  summarize(max_year_outcomes = max(year))
  
min_year_qb_data <- qb_data_to_2004 |>
  summarize(min_year_qb_data = min(season))

max_year_qb_data <- qb_data_to_2004 |>
  summarize(max_year_qb_data = max(season))

min_year_college_stats <- college_stats |>
  summarize(min_year_college = min(season)) 

max_year_college_stats <- college_stats |>
  summarize(max_year_qb_college = max(season))

min_year_prospect_data <- nfl_draft_prospect_data |>
  summarize(min_year_prospect = min(draft_year)) 

max_year_prospect_data <- nfl_draft_prospect_data |>
  summarize(max_year_prospect = max(draft_year))
 
```

```{r}
#| echo: false
year_ranges <- c(min_year_outcomes, max_year_outcomes, min_year_qb_data,
                 max_year_qb_data, min_year_college_stats, max_year_college_stats,
                 min_year_prospect_data, max_year_prospect_data)

names <- c("Outcomes Start Year", "Outcomes End Year", 
                        "QB Data Start Year", "QB Data End Year", 
                        "College Stats Start Year", "College Stats End Year",
                        "Prospect Data Start Year", "Prospect Data End Year")

kable(data.frame(year_ranges), col.names = names)
```
To get a sense of which years we should work with in answering some of the research questions, and in joining some of the datasets to clean them and answer questions, I found the timelines for the sets which contain years for each player observation. While the reader won't see me work with this data, I think that it's necessary context for interpreting the analysis that I'll conduct.

In working with quarterback data for prospects in their last years of college football and comparing them to league success, we should use quarterbacks from 2004 to 2015. In comparing data from all prospects to their NFL outcomes (that is, nfl_draft_prospect_data vs. outcomes) -- the two largest datasets here -- I'll aim to focus on the years 1985 to 2015.

Comparing the collegiate stats dataset to professional outcomes may not be as beneficial to developing any insights, since their intersection is just a year (2014 to 2015). However, though, in joining datasets and conducting multivariate analysis, this table gives me a sense of the time crossovers of the datasets in question.

Two of the datasets (nfl_draft_profiles and player_ids) don't have years, so I'll likely match any player observations I need from those using the player names.

```{r}
#| echo: false
## More Cleaning
# removing irrelevant variables, changing time ranges
nfl_draft_profiles_modified <- nfl_draft_profiles |>
  select(-player_image, -link, -school_logo, -text1, -text2, -text3, -text4, -guid)

nfl_draft_prospect_data_modified <- nfl_draft_prospect_data |>
  select(-team_logo_espn, -guid, -player_image) |>
  filter(draft_year > 1984)

# joining nfl_draft_profiles with nfl_draft_prospect_data_modified using player_id
nfl_draft_prospect_data_combined <- nfl_draft_prospect_data_modified |>
  left_join(nfl_draft_profiles_modified, join_by(player_id)) |>
  select(-contains(".y"))

nfl_draft_prospect_data_combined_1985_to_2021 <- nfl_draft_prospect_data_combined|>
  rename(player_name = player_name.x, 
         position = position.x, 
         pos_abbr = pos_abbr.x,
         school = school.x, 
         school_name = school_name.x, 
         school_abbr = school_abbr.x,
         weight = weight.x,
         height = height.x,
         pos_rk = pos_rk.x,
         ovr_rk = ovr_rk.x,
         grade = grade.x)

nfl_draft_prospect_data_combined_1985_to_2021$join_id_outcomes <- 
  str_c(nfl_draft_prospect_data_combined_1985_to_2021$draft_year,                                         nfl_draft_prospect_data_combined_1985_to_2021$player_name)

# join prospect_data with outcomes
nfl_draft_prospect_data_combined_1985_to_2015 <- nfl_draft_prospect_data_combined_1985_to_2021 |>
  filter(draft_year < 2016) 

nfl_draft_prospect_data_outcomes_1985_to_2015 <- nfl_draft_player_info_and_outcomes |>
  left_join(nfl_draft_prospect_data_combined_1985_to_2015, join_by(column_a == join_id_outcomes))

nfl_draft_prospect_data_outcomes_1985_to_2015 <- nfl_draft_prospect_data_outcomes_1985_to_2015 |>
  select(-team_abbr, -overall, -round, -draft_year, -contains(".y"),
         -player_name, -draft_year, -college_univ,
         -link, -alt_player_id) |>
  rename(join_id_outcomes = column_a, 
         pick = pick.x, 
         player_id = player_id.x,
         team_abbr = tm) |>
  distinct(join_id_outcomes, player_id, .keep_all = TRUE)

# writing/saving new datasets
write_csv(nfl_draft_prospect_data_outcomes_1985_to_2015,
          "data/nfl_draft_prospect_data_and_outcomes_1985_to_2015.csv")

write_csv(nfl_draft_prospect_data_combined_1985_to_2021, "data/nfl_draft_prospects_and_profiles_combined_1985_to_2021.csv")




```

## Introduction

By cleaning, merging, and exploring different datasets covering NFL Draft Data – on prospects’ physical information, statistical information, and career accolades and outcomes – I looked to explore whether some of those metrics and factors influenced their career successes and long-term draft value for different teams. Additionally, I examined whether certain elite physical and statistical metrics in different categories played a role in helping quarterbacks and linemen earn high draft selections.

I chose to explore this data because I'm particularly interestedd pro sports, but haven't conducted a comprehensive analysis to develop my own takeaways backed by data I explored. Thus, I chose to explore data regarding 30+ years of the NFL Draft.

## Data Overview and Quality
Regarding the two most important raw datasets, the first dataset has 34 variables. 25 of those are numerical, with the other nine being categorical. It has 8,435 observations, and has missingness for many performance statistics as well as some attributes (such as age drafted). That is somewhat expected, since football players of different positions typically do not record statistics in every category.

For the second dataset, there were five .csvs. The first, which contains data for the players as draft prospects, has 13,354 observations and 24 variables (14 of which are categorical). The second contains textual information regarding prospects (much of which is contained in the first dataset) -- it has 12,905 observations and 21 variables (13 of which are categorical).

Another has IDs for each drafted player, and may play less of a factor given much of that information is in the first dataset as well. It only has three variables (2 of which are categorical), and 236 observations. The fourth contains college statistics for draft prospects (including undrafted players), and has 66,672 observations with 13 variables; four are numerical and the other 9 are categorical. Finally, the fifth has college quarterback ratings for quarterback prospects going back to 2004. It has 2,049 observations, and 14 variables (12 of those 14 are numerical). None appear to have missingness.

The two joined datasets are combinations of these five, with the exception of the ids dataset. It has ample missingness due to the different positions and added metrics for each player, not all of which are universal. Additionally, ESPN's grade data and physical metrics tend to only be included for prospects past 2004 in all of these datasets, including the joined ones.


## Explorations

### What are Driving Factors Behind Career Success, and What Does Draft Spot Have To Do With That? 

#### What drives career success?

Let's see how a player's career approximate value, or AV, relates to accolades that only the league's most elite football players each season secure: Pro Bowl selections and First Team All-Pro selections. I'm defining a great career as one in which a player displays both longevity while sustaining a great performance level. Thus, in my opinion, the more All-Pro and Pro Bowl teams one makes, the better their career is. 
```{r}
# Average Value Distribution compared to All-Pro First Team Selections
nfl_draft_prospect_data_outcomes_1985_to_2015 |>
  mutate(ap1_factored = factor(ap1)) |>
  ggplot(aes(x = ap1_factored, y = carav)) +
  geom_boxplot(fill = "sky blue") +
  labs(title = "Career Approximate Value by Number of All-Pro First Team Selections", 
       x = "All-Pro First Team Selections", y = "Career Approximate Value (AV)")

# How about Pro Bowls?
nfl_draft_prospect_data_outcomes_1985_to_2015 |>
  mutate(pb_factored = factor(pb)) |>
  ggplot(aes(x = pb_factored, y = carav)) +
  geom_boxplot(fill = "sky blue") +
  labs(title = "Career Approximate Value by Number of Pro Bowl Selections", 
       x = "Pro Bowl Selections", y = "Career Approximate Value (AV)")
```
For every accolade earned, the median AV for players with a particular number of All-Pro and Pro Bowl selections tends to increase. 

Univariate-wise, let's explore the distribution of different players' approximate values during their careers. Doing every draftee from 1985 to 2015 (that is, including young, active ones) could skew the data lower, so let's look at the distribution for both retired players.

```{r}
#| eval: false
# AV Distribution: Everyone. Could be biased because of non-retired players whose careers aren't finished.
ggplot(nfl_draft_prospect_data_outcomes_1985_to_2015, aes(x = carav)) +
  geom_histogram(color = "white")
```

```{r}
# AV Distribution: Retired Players
nfl_draft_prospect_data_outcomes_1985_to_2015 |>
  filter(to < 2016) |>
  ggplot(aes(x = carav)) +
  geom_histogram(color = "white", binwidth = 5) +
  labs(title = "Career AV Distribution for Retired Players: 1985-2015",
       x = "AV", y = "Count")
```
It's apparent that career approximate value is a good measure of NFL career success: it rewards longevity and performance. It's also clear that most drafted players don't accumulate lots of AV. The right skew is dramatic, even without considering current players still accumulating AV as of 2015. This is potentially because of the vast number of late-round picks and the much-smaller number of starting/star roles on NFL teams. Thus, let's explore how this varies by round; that is, if first, second, and third-rounders buck that distribution:

```{r}
# AV Distribution: Retired First-Rounders
nfl_draft_prospect_data_outcomes_1985_to_2015 |>
  filter(to < 2016) |>
  filter(rnd == 1) |>
  ggplot(aes(x = carav)) +
  geom_histogram(color = "black", fill = "gold", binwidth = 5) +
  labs(title = "Career AV Distribution for Retired First-Rounders: 1985-2015",
       x = "AV", y = "Count")

# AV Distribution: Retired Second-Rounders
nfl_draft_prospect_data_outcomes_1985_to_2015 |>
  filter(to < 2016) |>
  filter(rnd == 2) |>
  ggplot(aes(x = carav)) +
  geom_histogram(color = "black", fill = "gray", binwidth = 5) +
  labs(title = "Career AV Distribution for Retired Second-Rounders: 1985-2015",
       x = "AV", y = "Count")

# AV Distribution: Retired Third-Rounders
nfl_draft_prospect_data_outcomes_1985_to_2015 |>
  filter(to < 2016) |>
  filter(rnd == 3) |>
  ggplot(aes(x = carav)) +
  geom_histogram(color = "black", fill = "#CD7F32", binwidth = 5) +
  labs(title = "Career AV Distribution for Retired Third-Rounders: 1985-2015",
       x = "AV", y = "Count")

# AV Median by Round: Table format
av_by_round <- nfl_draft_prospect_data_outcomes_1985_to_2015 |>
  filter(to < 2016) |>
  group_by(rnd) |>
  summarize(median_av = median(carav))

names = c("Round", "Median AV")
kable(data.frame(av_by_round), col.names = names, caption = "Median Approximate Value by Round for Retired Players: 1985 to 2015")
```
Evidently, the median AV goes down dramatically for every ensuing round. It's worth noting that the NFL moved to a seven-round draft format and has stuck with that since 1994, but that shift still holds. While the visual distributions for the first, second, and third round look relatively similar, the upper tail for Round 1 draftees seems to have many more players accumulate a career approximate value above 75 than in other rounds.

#### Does this change drastically by pick number? Let's look at the first two rounds.

```{r}
# Round 1
nfl_draft_prospect_data_outcomes_1985_to_2015 |>
  filter(to < 2016) |>
  filter(pick <= 32) |>
  mutate(pick_factored = factor(pick)) |>
  ggplot(aes(x = pick_factored, y = carav)) +
  geom_boxplot(fill = "gold") +
  labs(title = "Distribution of Career AV by Pick Number, Retired First-Rounders: 1985-2015",  x = "Overall Pick Number", y = "Career Approximate Value (AV)")

# Round 2
nfl_draft_prospect_data_outcomes_1985_to_2015 |>
  filter(to < 2016) |>
  filter(pick <= 64, pick > 32) |>
  mutate(pick_factored = factor(pick)) |>
  ggplot(aes(x = pick_factored, y = carav)) +
  geom_boxplot(fill = "gray") +
  labs(title = "Distribution of Career AV by Pick Number, Retired Second-Rounders: 1985-2015",  x = "Overall Pick Number", y = "Career Approximate Value (AV)")
```
There seems to be, for the most par, a general decrease in median career AV by draft pick for the retired first-round picks. However, in the second round, there isn't an apparent decline in the median; the 64th overall pick has a range quite similar to that of the 35th pick. You could even say that the decline in median AV slows as early as, say, the 20th pick. 

So, it's evident that there's high value early for teams picking in the first round, and it tends to drop as the first round goes on.

### With First-Round Value Looking High, what Factors Potentially Indicate Getting Picked Highly in the 21st century for Different Positions?

Since the roles of different positions in football vary drastically, let's look at this at a few positions.

#### Are the top QBs in college the highest-picked in the NFL Draft?

To get a sense of this, let's look at who the best quarterbacks were in college, statistically, since 2004. Let's start examining collegiate seasons with estimated points added (EPA), which is widely regarded as the best statistic to capture overall offensive impact, and then examine top seasons by quarterback ratings (QBR):

```{r}
# Examining EPA for QB prospects
qb_data_to_2004 |>
  ggplot(aes(x = total_epa)) +
  geom_histogram(color = "white", binwidth = 10) +
  labs(title = "Distribution of College Estimated Points Added: Quarterback Prospects from 2004-2021", x = "Estimated Points Added (EPA)")

top_qb_epas <- qb_data_to_2004 |>
  filter(total_epa >= 100) |>
  arrange(desc(total_epa)) |>
  slice_head(n = 25) |>
  select(player_name, season, total_epa)

names = c("Name", "NCAA Season", "EPA")  
kable(data.frame(top_qb_epas), col.names = names, caption = "Top 25 College Quarterback Seasons by Estimated Points Added Since 2004")
```
This is a fairly normal distribution, and it appears that QBs with seasons where they accumulated an EPA over 100 fall near the top end of the range. Let's see how many of these names are near the top of the QBR list:

```{r}
# Examining QBR for QB prospects
qb_data_to_2004 |>
  ggplot(aes(x = total_qbr)) +
  geom_histogram(color = "white", binwidth = 5) +
  labs(title = "Distribution of College Quarterback Rating: Prospects from 2004-2021", x = "Quarterback Rating (QBR)")

top_qbrs <- qb_data_to_2004 |>
  arrange(desc(total_qbr)) |>
  slice_head(n = 25) |>
  select(player_name, season, total_qbr)

names = c("Name", "NCAA Season", "QBR")  
kable(data.frame(top_qbrs), col.names = names, caption = "Top 25 College Quarterback Ratings Since 2004")

```
For good measure, here are the quarterbacks who fall inside the top 25s on both of these lists:

```{r}
# Top 20 QBR and EPA since 2004
top_college_qbs <- qb_data_to_2004 |>
  filter(total_qbr >= 88.5, total_epa >= 102.2) |>
  arrange(desc(total_epa)) |>
  select(player_name, season, total_qbr, total_epa)

names = c("Name", "NCAA Season", "QBR", "EPA")  
kable(data.frame(top_college_qbs), col.names = names, caption = "Top College Quarterbacks by EPA and QBR since 2004")
```
Obviously, it's a short list; in fact, every single one of those players were Heisman Trophy finalists. Let's look at how all of those top players on each of these lists fared in the draft process, though. Are these statistics good predictors for quarterbacks? One should expect all of those elite players to be early first-round draft picks...

```{r}
# Elite QBs in Draft
nfl_draft_prospect_data_combined_1985_to_2021 |>
  filter(player_name == "Mac Jones" |
           player_name == "Joe Burrow" | 
           player_name == "Kyler Murray" |
           player_name == "Jalen Hurts" | 
           player_name == "Sam Bradford" |
           player_name == "Cam Newton" | 
           player_name == "Baker Mayfield" | 
           player_name == "Marcus Mariota" | 
           player_name == "Johnny Manziel") |>
  ggplot(aes(x = overall, y = grade, color = player_name)) +
  geom_point(size = 4) +
  labs(title = "QBs in Top 25 of College QBR and EPA Since 2004: Draft Pick vs. ESPN Grade", subtitle = "Note that the highest-ranked, highest-picked QBs are near the top left of the graph.", x = "Overall Pick", y = "ESPN Draft Grade", color = "Player Name")
```
It's clear that in a multivariate examination, the quarterbacks that are the most elite of the elite in both statistics tend to be highly-graded, highly-drafted players. At the very least, they're almost always first-rounders. With the exception of Jalen Hurts, a second-round quarterback, this was the case.

Let's look at this with each individual statistic. Does this remain the case if we only consider the top quarterbacks for EACH statistic? We'll take away the nine quarterbacks evaluated above, just to get a sense of how quarterbacks who only excelled in one area fared.

```{r}
# Draft Picks and Grades for QBs with Top College EPAs
nfl_draft_prospect_data_combined_1985_to_2021 |>
  filter(player_name == "Colt Brennan" |
           player_name == "Case Keenum" |
           player_name == "Patrick Mahomes" | 
           player_name == "McKenzie Milton" |
           player_name == "Colin Kaepernick" |
           player_name == "Chase Clement" |
           player_name == "Quinton Flowers" |
           player_name == "Cody Fajardo" |
           player_name == "Derek Carr" |
           player_name == "Deshaun Watson" |
           player_name == "Anthony Gordon" |
           player_name == "Mason Rudolph" |
           player_name == "Taylor Heinicke" |
           player_name == "Colt McCoy" |
           player_name == "Brandon Doughty" |
           player_name == "Graham Harrell") |>
  filter(overall > 0, overall < 1000) |>
  ggplot(aes(x = overall, y = grade, color = player_name)) +
  geom_point(size = 4) +
  labs(title = "QBs with Top 25 College EPA Since 2004: Draft Pick vs. ESPN Grade", subtitle = "This does not include the nine players also ranked in Top 25 for College QBR since 2004.", x = "Overall Pick", y = "ESPN Draft Grade", color = "Player Name", caption = "All other players in the top 25 not listed here or in subtitle were not drafted.")
```
Not one of these players has an ESPN grade above 90, and a whopping eight of them went undrafted. Considering the other nine players graphed above, EPA does somewhat affect draft status for the most elite quarterbacks, but not necessarily alone. Now, for QBR:

```{r}
# Draft Picks and Grades for QBs with Top College QBRs
nfl_draft_prospect_data_combined_1985_to_2021 |>
  filter(player_name == "Tua Tagovailoa" |
           player_name == "Russell Wilson" |
           player_name == "Andrew Luck" | 
           player_name == "Justin Fields" |
           player_name == "Khalil Tate" |
           player_name == "Pat White" |
           player_name == "Jameis Winston" |
           player_name == "Seth Russell" |
           player_name == "Matt Corral" |
           player_name == "Kellen Moore" |
           player_name == "Anthony Gordon" |
           player_name == "Mason Rudolph" |
           player_name == "Zach Wilson" |
           player_name == "Kyle Trask") |>
  filter(overall > 0, overall < 1000) |>
  ggplot(aes(x = overall, y = grade, color = player_name)) +
  geom_point(size = 4) +
  labs(title = "QBs with Top 25 College EPA Seasons Since 2004: Draft Pick vs. ESPN Grade", subtitle = "This does not include the nine players also ranked in Top 25 for College QBR since 2004.", x = "Overall Pick", y = "ESPN Draft Grade", color = "Player Name", caption = "All other players in the top 25 not listed here or in subtitle were not drafted.")
```

More so than EPA, many of the quarterbacks with the highest QBRs in a college season since 2004 tend to be drafted early in the first round. While five of the 14 quarterbacks outside of the nine excluded went undrafted, QBR still appears to have a stronger relationship with high draft status (for the most elite QBs in that category) than EPA. 

However, it's apparent that both high QBR and high EPA, when taken together into consideration, are a better predictor of draft status for the best college quarterbacks.

#### Do weight and height for linemen (and quarterbacks) possess a relationship with high draft status?

More so than any other position, offensive and defensive linemen rely on strength, and tend to be the players that weigh the most on the field. So, in the process of looking for factors that lead to high draft status, it's worth exploring if weight and height contribute to that at a position where those variables appear to matter most.

```{r}
# Effect of Weight and Height on linemen
nfl_draft_prospect_data_combined_1985_to_2021 |>
  filter(pos_abbr == "OT" | pos_abbr == "OG" | pos_abbr == "DT" | pos_abbr == "DE") |>
  filter(height > 50) |>
  ggplot(aes(x = overall, y = weight, color = height)) +
  geom_point(position = "jitter") +
  geom_smooth(method = "lm", color = "red") +
  facet_wrap(~pos_abbr, labeller = labeller(pos_abbr =
               c("DE" = "Defensive Ends", "DT" = "Defensive Tackles",
                 "OT" = "Offensive Tackles", "OG" = "Offensive Guards"))) +
  labs(title = "Weight and Height vs. Draft Pick: NFL-Drafted Linemen", x = "Overall Draft Pick", y = "Weight (lbs)", color = "Height (inches)")
```
Weight and draft status appear to have almost no relationship for each of these positions. A player's height has a marginally positive relationship with their overall draft pick, but only for defensive ends. Ultimately, neither of these factors are significant predictors. Height and weight weren't recorded for prospects prior to 2004 -- a limitation of this data -- but how has this relationship changed in the recent decades?

```{r}
# Using Factors to Establish Eras
nfl_prospects_by_era <- nfl_draft_prospect_data_combined_1985_to_2021 |>
  mutate(factored_draft_year = factor(draft_year)) |>
  mutate(
    draft_era = fct_collapse(factored_draft_year,
      "1980s" = c("1985", "1986", "1987", "1989"),
      "1990s" = c("1990", "1991", "1992", "1993", "1994", "1995", "1997", "1998",
                  "1999"),
      "2000s" = c("2000", "2001", "2002", "2003", "2004", "2005", "2006", "2007", "2008",
                  "2009"),
      "2010s" = c("2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018",
                  "2019"),
      "2020s" = c("2020", "2021"))) 

# Offensive Tackles
nfl_prospects_by_era |>
filter(pos_abbr == "OT") |>
  filter(height > 50) |>
  ggplot(aes(x = overall, y = weight, color = height)) +
  geom_point() +
  geom_smooth(method = "lm", color = "red") +
  facet_wrap(~draft_era) +
  labs(title = "Weight and Height vs. Draft Pick: NFL-Drafted Offensive Tackles", x = "Overall Draft Pick", y = "Weight (lbs)", color = "Height (inches)")

# Offensive Guards
nfl_prospects_by_era |>
filter(pos_abbr == "OG") |>
  filter(height > 50) |>
  ggplot(aes(x = overall, y = weight, color = height)) +
  geom_point() +
  geom_smooth(method = "lm", color = "red") +
  facet_wrap(~draft_era) +
  labs(title = "Weight and Height vs. Draft Pick: NFL-Drafted Offensive Guards", x = "Overall Draft Pick", y = "Weight (lbs)", color = "Height (inches)")

# Defensive Ends
nfl_prospects_by_era |>
filter(pos_abbr == "DE") |>
  filter(height > 50) |>
  ggplot(aes(x = overall, y = weight, color = height)) +
  geom_point() +
  geom_smooth(method = "lm", color = "red") +
  facet_wrap(~draft_era) +
  labs(title = "Weight and Height vs. Draft Pick: NFL-Drafted Defensive Ends", x = "Overall Draft Pick", y = "Weight (lbs)", color = "Height (inches)")

# Defensive Tackles
nfl_prospects_by_era |>
filter(pos_abbr == "DT") |>
  filter(height > 50) |>
  ggplot(aes(x = overall, y = weight, color = height)) +
  geom_point() +
  geom_smooth(method = "lm", color = "red") +
  facet_wrap(~draft_era) +
  labs(title = "Weight and Height vs. Draft Pick: NFL-Drafted Defensive Tackles", x = "Overall Draft Pick", y = "Weight (lbs)", color = "Height (inches)")

```
The typical weight for drafted linemen hasn't actually varied drastically over the course of the 21st century. The only decade with 10 years of data -- the 2010s -- suggests that there isn't a strong relationship between draft pick, height, and weight. 

However, it appears that NFL teams are starting to tend to value heavier offensive tackles and guards. In contrast, it seems like a defensive end's weight matters less than it did about 20 years ago in considering how early they come off the draft board. A similar trend exists for defensive tackles. At that position, especially, height looks like it is starting to become a slightly greater factor in the 2020s drafts. Granted, the data only examines two drafts in the 2020s, which is worth noting. Nevertheless, the progression over these three decades indicates those small changes.

Let's examine height for quarterbacks. It's a metric that, at that particular position, has sparked lots of debate around prospects who aren't tall but possess other great skills^[https://www.usatoday.com/story/sports/nfl/columnist/bell/2023/03/03/bryce-young-weight-height-nfl-quarterback-draft-combine/11394682002/]. Firstly, let's look at the height distribution for drafted QBs since 2004.

```{r}
# QB Heights: Univariate
nfl_draft_prospect_data_combined_1985_to_2021 |>
  filter(pos_abbr == "QB") |>
  ggplot(aes(x = height)) +
  geom_histogram(color = "white", binwidth = 1) +
  labs(title = "Distribution of Height: QB Prospects Since 2004", x = "Height (inches)")
```

Most quarterbacks appear to be between 6 feet even and 6'5". With that in mind, is there a trend between height and draft spot? And, does it put the outliers (both very tall and very short) in danger?

```{r}
# QBs: Draft Spot vs. Height
nfl_draft_prospect_data_combined_1985_to_2021 |>
  filter(pos_abbr == "QB") |>
  ggplot(aes(x = overall, y = height)) +
  geom_point(position = "jitter") +
  geom_smooth(method = "lm") +
  labs(title = "Relationship Between Height and Draft Spot: QB Prospects Since 2004", x = "Overall Draft Pick", y = "Height (inches)")
```
There is a slight -- but not significant -- positive relationship between a quarterback's height and their draft position. Now, as we examined for linemen, has this changed over the past 20 years or so? Firstly, let's look at the distribution of quarterback prospect heights by year.

```{r}
# Distribution of QB Prospect Heights Since 2004, by Year
nfl_draft_prospect_data_combined_1985_to_2021 |>
  filter(pos_abbr == "QB", draft_year > 2004) |>
  mutate(factored_year = factor(draft_year)) |>
  ggplot(aes(x = factored_year, y = height)) +
  geom_boxplot(fill = "green") +
  labs(title = "Distribution of Quarterback Prospect Heights Since 2004, by Year", x = "Draft Year", y = "Height (inches)")
```
While the median quarterback prospect height has bounced around since 2004, it has hovered around 6'3", for the most part. How has this varied in relationship to draft status over time?

```{r}
# Draft Spot
nfl_prospects_by_era |>
  filter(pos_abbr == "QB") |>
  filter(draft_year >= 2000) |>
  ggplot(aes(x = overall, y = height)) +
  geom_point() +
  geom_smooth(method = "lm", color = "red") +
  facet_wrap(~draft_era) +
  labs(title = "Height vs. Draft Pick: NFL-Drafted Quarterbacks", x = "Overall Draft Pick", y = "Height (inches)")

# ESPN Grade
nfl_prospects_by_era |>
  filter(pos_abbr == "QB") |>
  filter(draft_year >= 2000) |>
  ggplot(aes(x = grade, y = height)) +
  geom_point() +
  geom_smooth(method = "lm", color = "red") +
  facet_wrap(~draft_era) +
  labs(title = "Height vs. ESPN Grade: NFL-Drafted Quarterbacks", x = "ESPN Grade", y = "Height (inches)", subtitle = "A higher ESPN Grade means the quarterback is more highly-touted.")
```
In the 2000s, the relationship between a quarterback's height and where they were drafted appeared to be moderately strong -- the average height of a quarterback by draft spot tended to decrease as the draft went on. However, in the 2010s and 2020s, that hasn't necessarily been the case. In fact, in the last two drafts in the 2020s, the trendline is almost constant.

Ironically, when it comes to the scouting experts (those at ESPN), the highest-ranked quarterbacks tends to be taller than the lowest-ranked ones -- and that hasn't changed since the 2000s.

However, in all of these cases, there are both a significant number of shorter and taller outliers that are both highly-ranked and lowly-ranked. Thus, although height matters when it comes to draft prestige to an extent, it's not the end-all, be-all for a quarterback's draft position.

### What Makes a Successful Draft Pick, Long-Term? And Who are the Most Successful Ones?

We've already explored the median AV by round, and its distribution for each of the first 64 picks for retired players. A top-5 draft pick may have a high AV relative to a third-rounder, but that doesn't make them a high-value pick (or a good one), even if they're the more valuable player!

So, let's bring a new metric into the fold: approximate value over expected, player's approximate value subtracted by the median AV for retired players at their draft spot. 

Granted, as we saw in some of the earlier explorations, the median AV for a player doesn't steadily decrease with every pick after the first round. Plus, different teams at different spots may pass on a better player to fill a positional need. Thus, I'll designate the "median AV" compared to each player as the median AV of a five-spot cluster. For instance, a No. 1 overall pick's AV over expected in this EDA would be their approximate value minus the median AV of retired picks No. 1 through No. 5 since 1985. A No. 6 pick would be compared to the median AVs for overall picks 6-10, a No. 11 pick for a median among picks 11-15, etc.


Here are the 25 players who either retired before 2016 or are active players at least five players removed from being drafted who have surpassed expectations relative to their draft spot the most:

#### Top 25 Retired Players with Highest Approximate Value Over Expected

```{r}
# Creating AV over Expected
top_avoe_overall <- nfl_draft_prospect_data_outcomes_1985_to_2015 |> 
  filter(to < 2016 | year <= 2011) |>
  mutate(carav = ifelse(is.na(carav), 0, carav)) |>
  mutate(draft_cluster = cut(pick, breaks = 67.2, right = FALSE)) |>
  group_by(draft_cluster) |>
  mutate(median_cluster_av = median(carav)) |>
  mutate(av_over_expected = carav - median_cluster_av) 

top_25_avoe_overall <- top_avoe_overall |>
  arrange(desc(av_over_expected)) |>
  ungroup(draft_cluster) |>
  select(player, pos, rnd, pick, year, carav, median_cluster_av, av_over_expected) |>
  slice_head(n = 25)

names <- c("Name", "Position", "Round", "Overall Pick", "Draft Year", "Total AV",
                        "Median 5-Pick Cluster AV", "AV Over Expected")

kable(data.frame(top_25_avoe_overall), col.names = names, caption = "Top 25 Players with Highest Approximate Value Over Expected Since 1985")

```
This does prove that high draft picks can still be immensely valuable, and is a great starting point because it gives us a much better picture of the "most valuable" picks with respect to their draft spot. This also demonstrates that these pleasant surprises can come from a number of positions. However, many of these top players were first-rounders who are at the top of the overall AV list for retired players -- Ray Lewis and Peyton Manning being prime examples. In fact, let's look at the overall pick distribution evaluated against AV over expected:

```{r}
# AVOE vs. Draft Pick
top_avoe_overall |>
  ggplot(aes(x = pick, y = av_over_expected, color = pos)) +
  geom_point(alpha = 0.45) +
  labs(title = "Approximate Value over Expected vs. Draft Pick Since 1985", x = "Overall Pick", y = "AV Over Expected", color = "Position")
```
This gives a sense that first-rounders are the ones who tend to dominate (and, by extension, more likely to fail badly with a higher median AV). It also looks like the surprise breakouts separate themselves at about the 50-AVOE mark. Going further, let's look at the pick distribution for players with an AV over expected that's either 50 or above:


```{r}
# AV Over Expected Distribution for Players that Shatter Expectations
top_avoe_overall |>
  filter(av_over_expected >= 50) |>
  mutate(factored_round = factor(pick)) |>
  ggplot(aes(x = av_over_expected)) +
  geom_histogram(color = "white") +
  labs(title = "Players with an Approximate Value Over Expected of 50+ by Draft Result", x = "Overall Draft Pick")
```
Higher-ranked players are much more likely to shatter expectations with the greatest force. Of course, first-round selections are perceived by almost everyone to have a better chance at becoming their sport's brightest star than their late-round counterparts.

#### Diamonds in the Rough

That's what makes finding an unsung talent that blossoms so impressive. It's worth examining. Using the median table by round as a framework far above, let's define "unsung" as a prospect who falls outside of the top 64. The top 25 players in AV over Expected for players drafted after the 64th pick are as follows:

```{r}
# Top 25 Diamonds in the Rough
top_25_avoe_diamonds <- top_avoe_overall |>
  filter(pick > 64) |>
  arrange(desc(av_over_expected)) |>
  ungroup(draft_cluster) |>
  select(player, pos, rnd, pick, year, carav, median_cluster_av, av_over_expected) |>
  slice_head(n = 25)

names <- c("Name", "Position", "Round", "Overall Pick", "Draft Year", "Total AV",
                        "Median 5-Pick Cluster AV", "AV Over Expected")

kable(data.frame(top_25_avoe_diamonds), col.names = names, caption = "Top 25 Retired Players with Highest AV Over Expected Since 1985, Drafted Round 3 or Later")
```
These high outliers are also diverse in position and in round, though it's worth wondering if this varies greatly by position when taking all of the late-round, big success stories into account. Using that 50-AVOE marker as the threshold, here's the position breakdown for players who meet that requirement and were drafted after Pick 64:
```{r}
# Position Breakdown for Diamonds in Rough
avoe_diamonds <- top_avoe_overall |>
  filter(pick > 64, av_over_expected >= 50)

diamond_breakdown <- avoe_diamonds |>
  group_by(pos) |>
  summarize(count = n()) |>
  arrange(desc(count))

names <- c("Position", "Number of Players with 50+ AV over Expected")

kable(data.frame(diamond_breakdown), col.names = names, caption = "Players with 50+ AV over Expected Drafted Round 3 or Later: Position Breakdown")
```
Nearly every position in the sport is represented here (further, a nose tackle is often labeled as a defensive tackle)^[https://www.rookieroad.com/football/positions/nose-tackle/]. Linebackers and guards lead the way, though position doesn't necessarily appear to be a limiting factor of a player's ability to become a diamond in the rough.

Have certain teams done a better job at identifying those players than others? 

#### Which Teams Have Had the Best Eyes for Long-Term Value?

To build off finding late-round value, since we've established that that's toughest, let's start there.

```{r}
# Teams' Success at Drafting Diamonds in the Rough
team_diamond_distribution <- avoe_diamonds |>
  group_by(team_abbr) |>
  ggplot(aes(x = fct_infreq(team_abbr), fill = team_abbr)) +
  geom_bar(show.legend = FALSE, width = 1) +
  labs(title = "Number of Late-Round Players with 50+ AVOE by Team", x = "Team Abbreviation", y = "Number of 50+ AV Over Expected Players",
       subtitle = "The Green Bay Packers (GNB) and Pittsburgh Steelers (PIT) stand out.", caption = "Every outer ring represents a 5-player threshold.")

pie <- team_diamond_distribution + coord_polar("x", start=0)
pie


```
The Green Bay Packers and Pittsburgh Steelers especially stand out, drafting almost 15 of these "diamonds in the rough" apiece. The difference between those teams and the rest of the league demonstrate over a stretch spanning multiple decades demonstrates that they are uniquely talented at identifying these diamonds in the rough.

To wrap up this EDA, though, let's tie this in together with value across the draft -- including in early rounds. While identifying the diamonds in the rough is most impressive, snagging players with higher values than expected at any spot is impactful. So, which teams have been historically most (and least) successful at drafting long-term value overall?

#### How Have Teams' Cumulative AV Over Expected Changed over Time?

To get a better visual picture, let's evaluate this by conference: AFC and NFC teams (16 teams in each, splitting the 32-team league evenly).

```{r}
# Establishing Cumulative Net-AV Over Expected: AFC teams
top_avoe_overall |>
  filter(team_abbr != "PHO", team_abbr != "RAI", team_abbr != "RAM") |>
  filter(team_abbr == "BAL" | team_abbr == "CLE" | team_abbr == "PIT" | team_abbr == "CIN" |
         team_abbr == "NYJ"| team_abbr == "NWE" | team_abbr == "BUF"| team_abbr == "MIA" | 
         team_abbr == "HOU"| team_abbr == "TEN" |team_abbr == "JAX" | team_abbr == "IND"|
         team_abbr == "KAN" | team_abbr == "SDG" | team_abbr == "OAK" | team_abbr == "DEN") |>
  group_by(team_abbr) |>
  arrange(year) |>
  mutate(cum_team_avoe = cumsum(av_over_expected)) |>
  ggplot(aes(x = year, y = cum_team_avoe, color = team_abbr)) +
  geom_line(size = 1, alpha = 0.5) +
  geom_label_repel(aes(label = team_abbr), fontface = "bold", size = 3, nudge_y = 2, max.overlaps = 15, stat = "unique") +
  coord_cartesian(xlim = c(1985, 2015)) +
  scale_x_continuous(breaks = c(1985, 1990, 1995, 2000, 2005, 2010, 2015)) +
  geom_smooth(method = "lm", color = "red", size = 2) +
  labs(title = "Cumulative AV Over Expected: AFC Teams from 1985-2015",
       x = "Year",
       y = "Cumulative AV Over Expected", subtitle = "The bold red line is the line of best fit.")
```

```{r}
# Establishing Cumulative Net-AV Over Expected: NFC teams
top_avoe_overall |>
  filter(team_abbr != "PHO", team_abbr != "RAI", team_abbr != "RAM") |>
  filter(team_abbr == "NYG" | team_abbr == "DAL" | team_abbr == "PHI" | team_abbr == "WAS" |
         team_abbr == "GNB"| team_abbr == "CHI" | team_abbr == "MIN"| team_abbr == "DET" | 
         team_abbr == "NOR"| team_abbr == "ATL" |team_abbr == "CAR" | team_abbr == "TAM"|
         team_abbr == "SFO" | team_abbr == "SEA" | team_abbr == "ARI" | team_abbr == "STL")|>
  group_by(team_abbr) |>
  arrange(year) |>
  mutate(cum_team_avoe = cumsum(av_over_expected)) |>
  ggplot(aes(x = year, y = cum_team_avoe, color = team_abbr)) +
  geom_line(size = 1, alpha = 0.5) +
  geom_label_repel(aes(label = team_abbr), fontface = "bold", size = 3, nudge_y = 3, stat = "unique", max.overlaps = 20) +
  coord_cartesian(xlim = c(1985, 2015)) +
  scale_x_continuous(breaks = c(1985, 1990, 1995, 2000, 2005, 2010, 2015)) +
  geom_smooth(method = "lm", color = "red", size = 2) +
  labs(title = "Cumulative AV Over Expected: NFC Teams from 1985-2015",
       x = "Year",
       y = "Cumulative AV Over Expected", subtitle = "The bold red line is the line of best fit.")
  
```

There are a number of takeaways from this. As they did in finding talent in the later rounds, the Pittsburgh Steelers and Green Bay Packers excel here. The Steelers, in particular, have a much higher cumulative approximate value over expected than the other teams. The team with the lowest cumulative total is the Oakland Raiders.

Additionally, it's clear that over time, cumulative AV over expected for teams tends to increase. This makes sense, as the majority of draft picks are remarkably close to the lower limit for a player's approximate value (0), meaning that there's not much room for disappointment for, say, a late-round pick in a cluster with a median AV of 1. However, there's a lot of room to exceed expectations. The biggest "bust," Cincinnati Bengals quarterback and 1999 No. 1 overall pick Akili Smith, has the lowest AV over expected since 1985 at -52. Meanwhile, as we explored, a late-round pick with a +52 AV over expected only slightly stands out from the crowd. Thus, overall growth -- despite some down years -- is almost a certainty over three decades for most teams.

## Conclusion
Ultimately, these three explorations help us equate success with approximate value, “value” with AV relative to similar draftees, and “high draft status” for quarterbacks and linemen as a product of a number of factors, namely EPA and QBR for the elite of the elite quarterbacks. It's worth noting that the overlap of this data may have been a limiting factor; having more physical and college statistical data to work with -- especially for quarterbacks -- could have been helpful in solidifying interpretations and analyses of certain trends.

## References
Data Sources: 

Pedersen, U. T. (2023, March 2). NFL draft 1985-2015. Kaggle. https://www.kaggle.com/datasets/ulrikthygepedersen/nfl-draft-1985-2015.

Lichtenstein, J. (2021, May 5). ESPN NFL draft prospect data. Kaggle. https://www.kaggle.com/datasets/jacklichtenstein/espn-nfl-draft-prospect-data/data.

## Appendix: Technical Info
###  Foundation for Cleaning: Raw Dataset Timelines
```{r}
#| echo: false
# Establishing a foundation for cleaning: Making raw dataset timeline
min_year_outcomes <- nfl_draft_player_info_and_outcomes |>
  summarize(min_year_outcomes = min(year))

max_year_outcomes <- nfl_draft_player_info_and_outcomes |>
  summarize(max_year_outcomes = max(year))
  
min_year_qb_data <- qb_data_to_2004 |>
  summarize(min_year_qb_data = min(season))

max_year_qb_data <- qb_data_to_2004 |>
  summarize(max_year_qb_data = max(season))

min_year_college_stats <- college_stats |>
  summarize(min_year_college = min(season)) 

max_year_college_stats <- college_stats |>
  summarize(max_year_qb_college = max(season))

min_year_prospect_data <- nfl_draft_prospect_data |>
  summarize(min_year_prospect = min(draft_year)) 

max_year_prospect_data <- nfl_draft_prospect_data |>
  summarize(max_year_prospect = max(draft_year))
 
```

```{r}
#| echo: false
year_ranges <- c(min_year_outcomes, max_year_outcomes, min_year_qb_data,
                 max_year_qb_data, min_year_college_stats, max_year_college_stats,
                 min_year_prospect_data, max_year_prospect_data)

names <- c("Outcomes Start Year", "Outcomes End Year", 
                        "QB Data Start Year", "QB Data End Year", 
                        "College Stats Start Year", "College Stats End Year",
                        "Prospect Data Start Year", "Prospect Data End Year")

kable(data.frame(year_ranges), col.names = names)
```
To get a sense of which years we should work with in answering some of the research questions, and in joining some of the datasets to clean them and answer questions, I found the timelines for the sets which contain years for each player observation. While the reader won't see me work with this data, I think that it's necessary context for interpreting the analysis that I'll conduct.

In working with quarterback data for prospects in their last years of college football and comparing them to league success, we should use quarterbacks from 2004 to 2015. In comparing data from all prospects to their NFL outcomes (that is, nfl_draft_prospect_data vs. outcomes) -- the two largest datasets here -- I'll aim to focus on the years 1985 to 2015.

Comparing the collegiate stats dataset to professional outcomes may not be as beneficial to developing any insights, since their intersection is just a year (2014 to 2015). However, though, in joining datasets and conducting multivariate analysis, this table gives me a sense of the time crossovers of the datasets in question.

Two of the datasets (nfl_draft_profiles and player_ids) don't have years, so I'll likely match any player observations I need from those using the player names.